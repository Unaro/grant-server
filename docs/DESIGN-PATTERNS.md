# Используемые паттерны проектирования в GrantServer

В проекте применяются современные паттерны, помогающие строить масштабируемую, гибкую и прозрачную архитектуру серверного приложения для грантового конкурса.

## Структурные паттерны

### 1. **DAO (Data Access Object)**

**Где используется:** Для каждого бизнес-модуля — `ParticipantDAO`, `ExpertDAO`, `GrantApplicationDAO`, `EvaluationDAO`
**Зачем:**

- Инкапсулирует всю работу с базой/хранилищем.
- Позволяет менять способ хранения без изменения бизнес-логики.
- Упрощает тестирование через mock/repository swap.


### 2. **DTO (Data Transfer Object)**

**Где используется:** В слоях запроса/ответа API (`ParticipantDTO`, `ExpertDTO`, `GrantApplicationDTO`, `EvaluationDTO`, `ServerResponseDTO` и др.)
**Зачем:**

- Безопасная сериализация/десериализация данных.
- Разделение бизнес-логики и контракта API.
- Упрощает интеграцию, валидацию и покрытие тестами.


### 3. **Mapper/Converter**

**Где используется:** Для преобразования Entity↔DTO при обработке запросов в каждом модуле
**Зачем:**

- Отделение моделей хранения от моделей передачи.
- Централизованная логика преобразования/валидации/сериализации.

***

## Порождающие паттерны

### 4. **Factory/Abstract Factory**

**Где используется:** Для создания DAO, сервисов, утилит и подсистемы расчёта итогов
**Зачем:**

- Гибкость для выбора реализации (например, разное хранилище для тестов/продакшена).
- Упрощение конфигурирования и внедрения зависимостей.


### 5. **Singleton**

**Где используется:** Глобальные сервисы: Logger, Config, ServiceRegistry
**Зачем:**

- Гарантирует единственный экземпляр сервиса, унифицирует доступ к конфигурациям.

***

## Поведенческие паттерны

### 6. **Strategy**

**Где используется:** В модуле ранжирования заявок (алгоритм сортировки) и для подсистемы фильтрации/выбора заявок/оценок
**Зачем:**

- Позволяет менять алгоритм без переписывания остального кода.
- Даёт возможность расширять/добавлять новые политики распределения грантов.


### 7. **Command**

**Где используется:** Для инкапсуляции действий над заявками/оценками (например, отмена заявки, изменение оценки, удаление участника)
**Зачем:**

- Инкапсуляция запроса к объекту в виде отдельной команды.
- Удобство для реализации undo/redo, истории операций, пакетных изменений.

***

## Примеры соответствия паттерн ↔ функция

| Паттерн | Где применяется | Для чего |
| :-- | :-- | :-- |
| DAO | Все CRUD-операции | Изоляция работы с БД |
| DTO | Любой обмен данными | Формальный API контракт |
| Mapper | В сервисах и API | Entity ↔ DTO, сериализация |
| Factory | Инициализация сервисов | Гибкость тестирования/расширения |
| Singleton | Logger, Config | Единая точка доступа |
| Strategy | Ранжирование, фильтрация | Смена алгоритма без refactoring |
| Command | Операции над заявкой/оценкой | Undo/Redo, история |


***

## Рекомендация

- Каждый новый бизнес-модуль должен включать свои DAO, DTO, (опционально) Command/Strategy, Mapper.
- Расширение логики — через добавление новых стратегий (алгоритм сортировки/распределения), новых команд (операции), новых фабрик (разные реализации DAO).
